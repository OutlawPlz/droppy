/**
 * Droppy - v1.1.1
 * Pure JavaScript multi-level drop-down menu.
 * By OutlawPlz, @license GPL-3.0.
 * https://github.com/OutlawPlz/droppy.git
 */
"document"in self&&("classList"in document.createElement("_")&&(!document.createElementNS||"classList"in document.createElementNS("http://www.w3.org/2000/svg","g"))?function(){"use strict";var e=document.createElement("_");if(e.classList.add("c1","c2"),!e.classList.contains("c2")){var t=function(e){var t=DOMTokenList.prototype[e];DOMTokenList.prototype[e]=function(e){var o,n=arguments.length;for(o=0;o<n;o++)e=arguments[o],t.call(this,e)}};t("add"),t("remove")}if(e.classList.toggle("c3",!1),e.classList.contains("c3")){var o=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(e,t){return 1 in arguments&&!this.contains(e)==!t?t:o.call(this,e)}}e=null}():function(e){"use strict";if("Element"in e){var t=e.Element.prototype,o=Object,n=String.prototype.trim||function(){return this.replace(/^\s+|\s+$/g,"")},r=Array.prototype.indexOf||function(e){for(var t=0,o=this.length;t<o;t++)if(t in this&&this[t]===e)return t;return-1},i=function(e,t){this.name=e,this.code=DOMException[e],this.message=t},s=function(e,t){if(""===t)throw new i("SYNTAX_ERR","An invalid or illegal string was specified");if(/\s/.test(t))throw new i("INVALID_CHARACTER_ERR","String contains an invalid character");return r.call(e,t)},l=function(e){for(var t=n.call(e.getAttribute("class")||""),o=t?t.split(/\s+/):[],r=0,i=o.length;r<i;r++)this.push(o[r]);this._updateClassName=function(){e.setAttribute("class",this.toString())}},a=l.prototype=[],p=function(){return new l(this)};if(i.prototype=Error.prototype,a.item=function(e){return this[e]||null},a.contains=function(e){return e+="",-1!==s(this,e)},a.add=function(){var e,t=arguments,o=0,n=t.length,r=!1;do{e=t[o]+"",-1===s(this,e)&&(this.push(e),r=!0)}while(++o<n);r&&this._updateClassName()},a.remove=function(){var e,t,o=arguments,n=0,r=o.length,i=!1;do{for(e=o[n]+"",t=s(this,e);-1!==t;)this.splice(t,1),i=!0,t=s(this,e)}while(++n<r);i&&this._updateClassName()},a.toggle=function(e,t){e+="";var o=this.contains(e),n=o?!0!==t&&"remove":!1!==t&&"add";return n&&this[n](e),!0===t||!1===t?t:!o},a.toString=function(){return this.join(" ")},o.defineProperty){var c={get:p,enumerable:!0,configurable:!0};try{o.defineProperty(t,"classList",c)}catch(e){-2146823252===e.number&&(c.enumerable=!1,o.defineProperty(t,"classList",c))}}else o.prototype.__defineGetter__&&t.__defineGetter__("classList",p)}}(self)),Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(e){for(var t=(this.document||this.ownerDocument).querySelectorAll(e),o=t.length;--o>=0&&t.item(o)!==this;);return o>-1}),function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).TinyEmitter=e()}}(function(){return function e(t,o,n){function r(s,l){if(!o[s]){if(!t[s]){var a="function"==typeof require&&require;if(!l&&a)return a(s,!0);if(i)return i(s,!0);var p=new Error("Cannot find module '"+s+"'");throw p.code="MODULE_NOT_FOUND",p}var c=o[s]={exports:{}};t[s][0].call(c.exports,function(e){var o=t[s][1][e];return r(o||e)},c,c.exports,e,t,o,n)}return o[s].exports}for(var i="function"==typeof require&&require,s=0;s<n.length;s++)r(n[s]);return r}({1:[function(e,t,o){function n(){}n.prototype={on:function(e,t,o){var n=this.e||(this.e={});return(n[e]||(n[e]=[])).push({fn:t,ctx:o}),this},once:function(e,t,o){function n(){r.off(e,n),t.apply(o,arguments)}var r=this;return n._=t,this.on(e,n,o)},emit:function(e){var t=[].slice.call(arguments,1),o=((this.e||(this.e={}))[e]||[]).slice(),n=0,r=o.length;for(n;n<r;n++)o[n].fn.apply(o[n].ctx,t);return this},off:function(e,t){var o=this.e||(this.e={}),n=o[e],r=[];if(n&&t)for(var i=0,s=n.length;i<s;i++)n[i].fn!==t&&n[i].fn._!==t&&r.push(n[i]);return r.length?o[e]=r:delete o[e],this}},t.exports=n},{}]},{},[1])(1)}),function(e,t){"function"==typeof define&&define.amd?define(["tiny-emitter"],t):"object"==typeof exports?module.exports=t(require("tiny-emitter")):e.Droppy=t(e.TinyEmitter)}(window,function(e){"use strict";function t(e,o,r){if(t.prototype.getInstance(e))m&&m.error("Droppy: another Droppy instance was found for this element.",e);else if(e.nodeType===Node.ELEMENT_NODE)if(this.element=e,this.element.querySelector(o.dropdownSelector))if(this.element.querySelector(o.parentSelector))if(this.element.querySelector(o.triggerSelector)){var i={parentSelector:"li",dropdownSelector:"li > ul",triggerSelector:"a",closeOthers:!0,clickOutToClose:!0,clickEscToClose:!0,animationIn:"",animationOut:"",preventDefault:!0};this.options=o&&"object"==typeof o?n(i,o):i;var s={beforeOpen:null,afterOpen:null,beforeClose:null,afterClose:null,beforeOpenAll:null,afterOpenAll:null,beforeCloseAll:null,afterCloseAll:null,beforeInit:null,afterInit:null,beforeDestroy:null,afterDestroy:null};this.callbacks=r&&"object"==typeof r?n(s,r):s,this.init()}else m&&m.error("Droppy: the given triggerSelector returns no value.",o.triggerSelector);else m&&m.error("Droppy: the given parentSelector returns no value.",o.parentSelector);else m&&m.error("Droppy: the given dropdownSelector returns no value.",o.dropdownSelector);else m&&m.error("Droppy: the given element is not valid.",e)}function o(){this.dropdown="",this.parent="",this.trigger="",this.parentNodes=[],this.descendantNodes=[],this.level=0,this.open=!1}function n(e,t){var o;for(o in t)e.hasOwnProperty(o)&&(e[o]=t[o]);return e}function r(e,t,o,n){for(n||(e=e.parentNode);e!==t&&e!==document.body;){if(e.matches(o))return e;e=e.parentNode}}function i(e,t,o,n){n||(e=e.parentNode);for(var r=[];e!==t&&e!==document.body;)e.matches(o)&&r.push(e),e=e.parentNode;return r}function s(e,t,n,s){var a,p=Array.prototype.slice.call(e.querySelectorAll(t)),c=[],f=0;for(p.length;a=p[f];f++){var d=new o;d.dropdown=a,d.parent=r(a,e,n,!1),d.trigger=d.parent.querySelector(s);for(var u,h,y=i(a,e,t,!1),g=y.length;g--,h=y[g];)u=l("dropdown",h,c),d.parentNodes.push(u),u.descendantNodes.push(d);d.level=d.parentNodes.length,c.push(d)}return c}function l(e,t,o){for(var n,r=o.length;r--,n=o[r];)if(n[e]===t)return n}function a(e,t,o){for(var n,r=[],i=o.length;i--,n=o[i];)n[e]===t&&r.push(n);return r}function p(e,t,o){"boolean"!=typeof t&&(t=!1);for(var n,r=e,i=[e],s=e.parentNodes.length;s--,n=e.parentNodes[s];)n.open||(i.push(n),r=n);for(i=i.reverse(),b&&o&&f(r,o),s=i.length,e;s--,e=i[s];)u(e,t)}function c(e,t,o){"boolean"!=typeof t&&(t=!0),b&&o?d(e,t,o):h(e,t)}function f(e,t){e.dropdown.addEventListener("animationend",function o(){e.dropdown.classList.remove(t),e.dropdown.removeEventListener("animationend",o)}),e.dropdown.classList.add(t)}function d(e,t,o){e.dropdown.addEventListener("animationend",function n(){e.dropdown.classList.remove(o),h(e,t),e.dropdown.removeEventListener("animationend",n)}),e.dropdown.classList.add(o)}function u(e,t){if(t)for(var o,n=e.descendantNodes.length;n--,o=e.descendantNodes[n];)o.open||(o.dropdown.classList.add("droppy__drop--active"),o.trigger.setAttribute("aria-expanded","true"),o.open=!0);e.dropdown.classList.add("droppy__drop--active"),e.trigger.setAttribute("aria-expanded","true"),e.open=!0}function h(e,t){if(e.dropdown.classList.remove("droppy__drop--active"),e.trigger.setAttribute("aria-expanded","false"),e.open=!1,t)for(var o,n=e.descendantNodes.length;n--,o=e.descendantNodes[n];)o.open&&(o.dropdown.classList.remove("droppy__drop--active"),o.trigger.setAttribute("aria-expanded","false"),o.open=!1)}function y(e){for(var t,o,n,i,s=v.length;s--,i=v[s];)i.element.contains(e.target)||!i.options.clickOutToClose?(n=!!(t=r(e.target,i.element,".droppy__trigger",!0))&&l("trigger",t,i.tree))&&(o=!!e.shiftKey||void 0,i.toggle(n,o),i.options.preventDefault&&!e.ctrlKey&&e.preventDefault()):i.closeAll()}function g(e){if(27===e.which)for(var t,o=v.length;o--,t=v[o];)t.options.clickEscToClose&&t.closeAll()}var m=window.console,v=[],b=function(){var e=!1,t=document.createElement("div");return void 0!==t.style.animationName&&(e=!0),e||void 0!==t.style.WebkitAnimationName&&(e=!0),e}();t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.prototype.init=function(){if(!t.prototype.isInitialized(this)){"function"==typeof this.callbacks.beforeInit&&this.callbacks.beforeInit(),this.tree=s(this.element,this.options.dropdownSelector,this.options.parentSelector,this.options.triggerSelector),this.element.classList.add("droppy");for(var e,o=this.tree.length;o--,e=this.tree[o];)e.dropdown.classList.add("droppy__drop"),e.parent.classList.add("droppy__parent"),e.trigger.classList.add("droppy__trigger"),e.trigger.setAttribute("aria-haspopup","true"),e.trigger.setAttribute("aria-expanded","false");0===v.length&&(document.body.addEventListener("click",y),document.body.addEventListener("keyup",g)),v.push(this),"function"==typeof this.callbacks.afterInit&&this.callbacks.afterInit(),this.emit("init",{droppy:this})}},t.prototype.destroy=function(){if(t.prototype.isInitialized(this)){"function"==typeof this.callbacks.beforeDestroy&&this.callbacks.beforeDestroy(),this.element.classList.remove("droppy");for(var e,o=this.tree.length;o--,e=this.tree[o];)e.dropdown.classList.remove("droppy__drop","droppy__drop--active"),e.parent.classList.remove("droppy__parent"),e.trigger.classList.remove("droppy__trigger"),e.trigger.removeAttribute("aria-haspopup"),e.trigger.removeAttribute("aria-expanded");delete this.tree,1===v.length&&(document.body.removeEventListener("click",y),document.body.removeEventListener("keyup",g));for(var n,r=v.length;r--,n=v[r];)n===this&&v.splice(r,1);"function"==typeof this.callbacks.afterDestroy&&this.callbacks.afterDestroy(),this.emit("destroy",{droppy:this})}},t.prototype.open=function(e,t){var n;if(!(n=e instanceof o?e:l("dropdown",e,this.tree)).open){if("function"==typeof this.callbacks.beforeOpen&&this.callbacks.beforeOpen(),this.options.closeOthers)for(var r,i=a("level",n.level,this.tree),s=i.length;s--,r=i[s];)r.open&&c(r,!0,this.options.animationOut);p(n,t,this.options.animationIn),"function"==typeof this.callbacks.afterOpen&&this.callbacks.afterOpen(),this.emit("open",{droppy:this,dropdown:n})}},t.prototype.close=function(e,t){var n;(n=e instanceof o?e:l("dropdown",e,this.tree)).open&&("function"==typeof this.callbacks.beforeClose&&this.callbacks.beforeClose(),c(n,t,this.options.animationOut),"function"==typeof this.callbacks.afterClose&&this.callbacks.afterClose(),this.emit("close",{droppy:this,dropdown:n}))},t.prototype.toggle=function(e,t){var n;(n=e instanceof o?e:l("dropdown",e,this.tree)).open?this.close(n,t):this.open(n,t)},t.prototype.closeAll=function(){if(l("open",!0,this.tree)){"function"==typeof this.callbacks.beforeCloseAll&&this.callbacks.beforeCloseAll();for(var e,t=a("level",0,this.tree),o=t.length;o--,e=t[o];)e.open&&c(e,!0,this.options.animationOut);"function"==typeof this.callbacks.afterCloseAll&&this.callbacks.afterCloseAll(),this.emit("closeAll",{droppy:this})}},t.prototype.openAll=function(){if(l("open",!1,this.tree)){"function"==typeof this.callbacks.beforeOpenAll&&this.callbacks.beforeOpenAll();for(var e,t=a("level",0,this.tree),o=t.length;o--,e=t[o];)if(e.open){var n,r=0;for(e.descendantNodes.length;n=e.descendantNodes[r];++r)n.open||p(n,!0,this.options.animationIn)}else p(e,!0,this.options.animationIn);"function"==typeof this.callbacks.afterOpenAll&&this.callbacks.afterOpenAll(),this.emit("openAll",{droppy:this})}},t.prototype.isInitialized=function(e){for(var t,o=v.length;o--,t=v[o];)if(e===t)return!0;return!1},t.prototype.getInstance=function(e){for(var t,o=v.length;o--,t=v[o];)if(t.element===e)return t};for(var w,_=document.querySelectorAll("[data-droppy]"),A=_.length;A--,w=_[A];)new t(w,JSON.parse(w.getAttribute("data-droppy")));return t});