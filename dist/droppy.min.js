/**
 * Droppy - v1.2.0
 * Pure JavaScript multi-level dropdown menu.
 * By OutlawPlz, license GPL-3.0.
 * https://github.com/OutlawPlz/droppy.git
 */
"document"in self&&("classList"in document.createElement("_")&&(!document.createElementNS||"classList"in document.createElementNS("http://www.w3.org/2000/svg","g"))?!function(){"use strict";var e=document.createElement("_");if(e.classList.add("c1","c2"),!e.classList.contains("c2")){var t=function(e){var t=DOMTokenList.prototype[e];DOMTokenList.prototype[e]=function(e){var o,n=arguments.length;for(o=0;o<n;o++)e=arguments[o],t.call(this,e)}};t("add"),t("remove")}if(e.classList.toggle("c3",!1),e.classList.contains("c3")){var o=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(e,t){return 1 in arguments&&!this.contains(e)==!t?t:o.call(this,e)}}e=null}():!function(e){"use strict";if("Element"in e){var t="classList",o="prototype",n=e.Element[o],r=Object,i=String[o].trim||function(){return this.replace(/^\s+|\s+$/g,"")},s=Array[o].indexOf||function(e){for(var t=0,o=this.length;t<o;t++)if(t in this&&this[t]===e)return t;return-1},a=function(e,t){this.name=e,this.code=DOMException[e],this.message=t},l=function(e,t){if(""===t)throw new a("SYNTAX_ERR","An invalid or illegal string was specified");if(/\s/.test(t))throw new a("INVALID_CHARACTER_ERR","String contains an invalid character");return s.call(e,t)},c=function(e){for(var t=i.call(e.getAttribute("class")||""),o=t?t.split(/\s+/):[],n=0,r=o.length;n<r;n++)this.push(o[n]);this._updateClassName=function(){e.setAttribute("class",this.toString())}},p=c[o]=[],d=function(){return new c(this)};if(a[o]=Error[o],p.item=function(e){return this[e]||null},p.contains=function(e){return e+="",l(this,e)!==-1},p.add=function(){var e,t=arguments,o=0,n=t.length,r=!1;do e=t[o]+"",l(this,e)===-1&&(this.push(e),r=!0);while(++o<n);r&&this._updateClassName()},p.remove=function(){var e,t,o=arguments,n=0,r=o.length,i=!1;do for(e=o[n]+"",t=l(this,e);t!==-1;)this.splice(t,1),i=!0,t=l(this,e);while(++n<r);i&&this._updateClassName()},p.toggle=function(e,t){e+="";var o=this.contains(e),n=o?t!==!0&&"remove":t!==!1&&"add";return n&&this[n](e),t===!0||t===!1?t:!o},p.toString=function(){return this.join(" ")},r.defineProperty){var f={get:d,enumerable:!0,configurable:!0};try{r.defineProperty(n,t,f)}catch(e){e.number===-2146823252&&(f.enumerable=!1,r.defineProperty(n,t,f))}}else r[o].__defineGetter__&&n.__defineGetter__(t,d)}}(self)),Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(e){for(var t=(this.document||this.ownerDocument).querySelectorAll(e),o=t.length;--o>=0&&t.item(o)!==this;);return o>-1}),function(e,t){"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?module.exports=t():e.Droppy=t()}(window,function(){"use strict";function e(t,n,r){if(e.prototype.getInstance(t))return void(y&&y.error("Droppy: another Droppy instance was found for this element.",t));if(t.nodeType!==Node.ELEMENT_NODE)return void(y&&y.error("Droppy: the given element is not valid.",t));this.element=t;var i=this.element.querySelector(n.dropdownSelector);if(!i)return void(y&&y.error("Droppy: the given dropdownSelector returns no value.",n.dropdownSelector));var s=this.element.querySelector(n.parentSelector);if(!s)return void(y&&y.error("Droppy: the given parentSelector returns no value.",n.parentSelector));var a=this.element.querySelector(n.triggerSelector);if(!a)return void(y&&y.error("Droppy: the given triggerSelector returns no value.",n.triggerSelector));var l={parentSelector:"li",dropdownSelector:"li > ul",triggerSelector:"a",closeOthers:!0,clickOutToClose:!0,clickEscToClose:!0,animationIn:"",animationOut:"",preventDefault:!0};n&&"object"==typeof n?this.options=o(l,n):this.options=l;var c={beforeOpen:null,afterOpen:null,beforeClose:null,afterClose:null,beforeOpenAll:null,afterOpenAll:null,beforeCloseAll:null,afterCloseAll:null,beforeInit:null,afterInit:null,beforeDestroy:null,afterDestroy:null};r&&"object"==typeof r?this.callbacks=o(c,r):this.callbacks=c,this.init()}function t(){this.dropdown="",this.parent="",this.trigger="",this.parentNodes=[],this.descendantNodes=[],this.level=0,this.open=!1}function o(e,t){var o;for(o in t)e.hasOwnProperty(o)&&(e[o]=t[o]);return e}function n(e,t,o,n){for(n||(e=e.parentNode);e!==t;){if(e.matches(o))return e;e=e.parentNode}}function r(e,t,o,n){n||(e=e.parentNode);for(var r=[];e!==t;)e.matches(o)&&r.push(e),e=e.parentNode;return r}function i(e,o,i,a){var l,c=Array.prototype.slice.call(e.querySelectorAll(o)),p=[],d=0;for(c.length;l=c[d];d++){var f=new t;f.dropdown=l,f.parent=n(l,e,i,!1),f.trigger=f.parent.querySelector(a);for(var u,h,g=r(l,e,o,!1),v=g.length;v--,h=g[v];)u=s("dropdown",h,p),f.parentNodes.push(u),u.descendantNodes.push(f);f.level=f.parentNodes.length,p.push(f)}return p}function s(e,t,o){for(var n,r=o.length;r--,n=o[r];)if(n[e]===t)return n}function a(e,t,o){for(var n,r=[],i=o.length;i--,n=o[i];)n[e]===t&&r.push(n);return r}function l(){var e=!1,t=document.createElement("div"),o="Webkit";return void 0!==t.style.animationName&&(e=!0),e||void 0!==t.style[o+"AnimationName"]&&(e=!0),e}function c(e,t,o){"boolean"!=typeof t&&(t=!1);for(var n,r=e,i=[e],s=e.parentNodes.length;s--,n=e.parentNodes[s];)n.open||(i.push(n),r=n);for(i=i.reverse(),b&&o&&d(r,o),s=i.length,e;s--,e=i[s];)u(e,t)}function p(e,t,o){"boolean"!=typeof t&&(t=!0),b&&o?f(e,t,o):h(e,t)}function d(e,t){e.dropdown.addEventListener("animationend",function o(){e.dropdown.classList.remove(t),e.dropdown.removeEventListener("animationend",o)}),e.dropdown.classList.add(t)}function f(e,t,o){e.dropdown.addEventListener("animationend",function n(){e.dropdown.classList.remove(o),h(e,t),e.dropdown.removeEventListener("animationend",n)}),e.dropdown.classList.add(o)}function u(e,t){if(t)for(var o,n=e.descendantNodes.length;n--,o=e.descendantNodes[n];)o.open||(o.dropdown.classList.add("droppy__drop--active"),o.trigger.setAttribute("aria-expanded","true"),o.open=!0);e.dropdown.classList.add("droppy__drop--active"),e.trigger.setAttribute("aria-expanded","true"),e.open=!0}function h(e,t){if(e.dropdown.classList.remove("droppy__drop--active"),e.trigger.setAttribute("aria-expanded","false"),e.open=!1,t)for(var o,n=e.descendantNodes.length;n--,o=e.descendantNodes[n];)o.open&&(o.dropdown.classList.remove("droppy__drop--active"),o.trigger.setAttribute("aria-expanded","false"),o.open=!1)}function g(t){var o=n(t.target,document.body,".droppy__trigger",!0);if(o){for(var i,a=r(t.target,document.body,".droppy",!1),l=[],c=m.length;c--,i=m[c];)i.options.clickOutToClose&&l.push(i);if(l=l.filter(function(t){for(var o,n=this.length;n--,o=this[n];)if(e.prototype.getInstance(o)===t)return!1;return!0},a),o){i=e.prototype.getInstance(n(t.target,document.body,".droppy",!1));var p=!!t.shiftKey||void 0,d=s("trigger",o,i.tree);i.toggle(d,p),i.options.preventDefault&&t.preventDefault()}for(var f,u=l.length;u--,f=l[u];)f.closeAll()}}function v(e){if(27===e.which)for(var t,o=m.length;o--,t=m[o];)t.options.clickEscToClose&&t.closeAll()}var y=window.console,m=[],b=l();e.prototype.init=function(){if(!e.prototype.isInitialized(this)){"function"==typeof this.callbacks.beforeInit&&this.callbacks.beforeInit(),this.tree=i(this.element,this.options.dropdownSelector,this.options.parentSelector,this.options.triggerSelector),this.element.classList.add("droppy");for(var t,o=this.tree.length;o--,t=this.tree[o];)t.dropdown.classList.add("droppy__drop"),t.parent.classList.add("droppy__parent"),t.trigger.classList.add("droppy__trigger"),t.trigger.setAttribute("aria-haspopup","true"),t.trigger.setAttribute("aria-expanded","false");0===m.length&&(document.body.addEventListener("click",g),document.body.addEventListener("keyup",v)),m.push(this),"function"==typeof this.callbacks.afterInit&&this.callbacks.afterInit()}},e.prototype.destroy=function(){if(e.prototype.isInitialized(this)){"function"==typeof this.callbacks.beforeDestroy&&this.callbacks.beforeDestroy(),this.element.classList.remove("droppy");for(var t,o=this.tree.length;o--,t=this.tree[o];)t.dropdown.classList.remove("droppy__drop","droppy__drop--active"),t.parent.classList.remove("droppy__parent"),t.trigger.classList.remove("droppy__trigger"),t.trigger.removeAttribute("aria-haspopup"),t.trigger.removeAttribute("aria-expanded");delete this.tree,1===m.length&&(document.body.removeEventListener("click",g),document.body.removeEventListener("keyup",v)),delete this.handler;for(var n,r=m.length;r--,n=m[r];)n===this&&m.splice(r,1);"function"==typeof this.callbacks.afterDestroy&&this.callbacks.afterDestroy()}},e.prototype.open=function(e,o){var n;if(n=e instanceof t?e:s("dropdown",e,this.tree),!n.open){if("function"==typeof this.callbacks.beforeOpen&&this.callbacks.beforeOpen(),this.options.closeOthers)for(var r,i=a("level",n.level,this.tree),l=i.length;l--,r=i[l];)r.open&&p(r,!0,this.options.animationOut);c(n,o,this.options.animationIn),"function"==typeof this.callbacks.afterOpen&&this.callbacks.afterOpen()}},e.prototype.close=function(e,o){var n;n=e instanceof t?e:s("dropdown",e,this.tree),n.open&&("function"==typeof this.callbacks.beforeClose&&this.callbacks.beforeClose(),p(n,o,this.options.animationOut),"function"==typeof this.callbacks.afterClose&&this.callbacks.afterClose())},e.prototype.toggle=function(e,o){var n;n=e instanceof t?e:s("dropdown",e,this.tree),n.open?this.close(n,o):this.open(n,o)},e.prototype.closeAll=function(){var e=s("open",!0,this.tree);if(e){"function"==typeof this.callbacks.beforeCloseAll&&this.callbacks.beforeCloseAll();for(var t,o=a("level",0,this.tree),n=o.length;n--,t=o[n];)t.open&&p(t,!0,this.options.animationOut);"function"==typeof this.callbacks.afterCloseAll&&this.callbacks.afterCloseAll()}},e.prototype.openAll=function(){var e=s("open",!1,this.tree);if(e){"function"==typeof this.callbacks.beforeOpenAll&&this.callbacks.beforeOpenAll();for(var t,o=a("level",0,this.tree),n=o.length;n--,t=o[n];)if(t.open){var r,i=0;for(t.descendantNodes.length;r=t.descendantNodes[i];++i)r.open||c(r,!0,this.options.animationIn)}else c(t,!0,this.options.animationIn);"function"==typeof this.callbacks.afterOpenAll&&this.callbacks.afterOpenAll()}},e.prototype.isInitialized=function(e){for(var t,o=m.length;o--,t=m[o];)if(e===t)return!0;return!1},e.prototype.getInstance=function(e){for(var t,o=m.length;o--,t=m[o];)if(t.element===e)return t};for(var w,_=document.querySelectorAll("[data-droppy]"),k=_.length;k--,w=_[k];)new e(w,JSON.parse(w.getAttribute("data-droppy")));return e});