/**
 * Droppy - v1.1.0
 * Pure JavaScript multi-level dropdown menu.
 * By OutlawPlz, license GPL-3.0.
 * https://github.com/OutlawPlz/droppy.git
 */
"document"in self&&("classList"in document.createElement("_")&&(!document.createElementNS||"classList"in document.createElementNS("http://www.w3.org/2000/svg","g"))?!function(){"use strict";var t=document.createElement("_");if(t.classList.add("c1","c2"),!t.classList.contains("c2")){var e=function(t){var e=DOMTokenList.prototype[t];DOMTokenList.prototype[t]=function(t){var o,r=arguments.length;for(o=0;o<r;o++)t=arguments[o],e.call(this,t)}};e("add"),e("remove")}if(t.classList.toggle("c3",!1),t.classList.contains("c3")){var o=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(t,e){return 1 in arguments&&!this.contains(t)==!e?e:o.call(this,t)}}t=null}():!function(t){"use strict";if("Element"in t){var e="classList",o="prototype",r=t.Element[o],n=Object,i=String[o].trim||function(){return this.replace(/^\s+|\s+$/g,"")},s=Array[o].indexOf||function(t){for(var e=0,o=this.length;e<o;e++)if(e in this&&this[e]===t)return e;return-1},a=function(t,e){this.name=t,this.code=DOMException[t],this.message=e},l=function(t,e){if(""===e)throw new a("SYNTAX_ERR","An invalid or illegal string was specified");if(/\s/.test(e))throw new a("INVALID_CHARACTER_ERR","String contains an invalid character");return s.call(t,e)},c=function(t){for(var e=i.call(t.getAttribute("class")||""),o=e?e.split(/\s+/):[],r=0,n=o.length;r<n;r++)this.push(o[r]);this._updateClassName=function(){t.setAttribute("class",this.toString())}},p=c[o]=[],d=function(){return new c(this)};if(a[o]=Error[o],p.item=function(t){return this[t]||null},p.contains=function(t){return t+="",l(this,t)!==-1},p.add=function(){var t,e=arguments,o=0,r=e.length,n=!1;do t=e[o]+"",l(this,t)===-1&&(this.push(t),n=!0);while(++o<r);n&&this._updateClassName()},p.remove=function(){var t,e,o=arguments,r=0,n=o.length,i=!1;do for(t=o[r]+"",e=l(this,t);e!==-1;)this.splice(e,1),i=!0,e=l(this,t);while(++r<n);i&&this._updateClassName()},p.toggle=function(t,e){t+="";var o=this.contains(t),r=o?e!==!0&&"remove":e!==!1&&"add";return r&&this[r](t),e===!0||e===!1?e:!o},p.toString=function(){return this.join(" ")},n.defineProperty){var u={get:d,enumerable:!0,configurable:!0};try{n.defineProperty(r,e,u)}catch(t){t.number===-2146823252&&(u.enumerable=!1,n.defineProperty(r,e,u))}}else n[o].__defineGetter__&&r.__defineGetter__(e,d)}}(self)),Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(t){for(var e=(this.document||this.ownerDocument).querySelectorAll(t),o=e.length;--o>=0&&e.item(o)!==this;);return o>-1}),function(t,e){"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?module.exports=e():t.Droppy=e()}(window,function(){"use strict";function t(e,r,n){if(t.prototype.getInstance(e))return void(y&&y.error("Droppy: another Droppy instance was found for this element.",e));if(e.nodeType!==Node.ELEMENT_NODE)return void(y&&y.error("Droppy: the given element is not valid.",e));this.element=e;var i=this.element.querySelector(r.dropdownSelector);if(!i)return void(y&&y.error("Droppy: the given dropdownSelector returns no value.",r.dropdownSelector));var s=this.element.querySelector(r.parentSelector);if(!s)return void(y&&y.error("Droppy: the given parentSelector returns no value.",r.parentSelector));var a=this.element.querySelector(r.triggerSelector);if(!a)return void(y&&y.error("Droppy: the given triggerSelector returns no value.",r.triggerSelector));var l={parentSelector:"li",dropdownSelector:"li > ul",triggerSelector:"a",closeOthers:!0,clickOutToClose:!0,clickEscToClose:!0,animationIn:"",animationOut:"",preventDefault:!0};r&&"object"==typeof r?this.options=o(l,r):this.options=l;var c={beforeOpen:null,afterOpen:null,beforeClose:null,afterClose:null,beforeOpenAll:null,afterOpenAll:null,beforeCloseAll:null,afterCloseAll:null,beforeInit:null,afterInit:null,beforeDestroy:null,afterDestroy:null};n&&"object"==typeof n?this.callbacks=o(c,n):this.callbacks=c,this.init()}function e(){this.dropdown="",this.parent="",this.dropdown="",this.parentsNode=[],this.descendantsNode=[],this.level=0,this.status=!1}function o(t,e){var o;for(o in e)t.hasOwnProperty(o)&&(t[o]=e[o]);return t}function r(t,e,o,r){for(r||(t=t.parentNode);t!==e;){if(t.matches(o))return t;t=t.parentNode}}function n(t,e,o,r){r||(t=t.parentNode);for(var n=[];t!==e;)t.matches(o)&&n.push(t),t=t.parentNode;return n}function i(t,o,i,a){var l,c=Array.prototype.slice.call(t.querySelectorAll(o)),p=[],d=0;for(c.length;l=c[d];d++){var u=new e;u.dropdown=l,u.parent=r(l,t,i,!1),u.trigger=u.parent.querySelector(a);for(var f,h,v=n(l,t,o,!1),g=v.length;g--,h=v[g];)f=s("dropdown",h,p),u.parentsNode.push(f),f.descendantsNode.push(u);u.level=u.parentsNode.length,p.push(u)}return p}function s(t,e,o){for(var r,n=o.length;n--,r=o[n];)if(r[t]===e)return r}function a(t,e,o){for(var r,n=[],i=o.length;i--,r=o[i];)r[t]===e&&n.push(r);return n}function l(){var t=!1,e=document.createElement("div"),o="Webkit";return void 0!==e.style.animationName&&(t=!0),t||void 0!==e.style[o+"AnimationName"]&&(t=!0),t}function c(t,e,o){"boolean"!=typeof e&&(e=!1),b&&o&&d(t,o),f(t,e)}function p(t,e,o){"boolean"!=typeof e&&(e=!0),b&&o?u(t,e,o):h(t,e)}function d(t,e){t.dropdown.addEventListener("animationend",function o(){t.dropdown.classList.remove(e),t.dropdown.removeEventListener("animationend",o)}),t.dropdown.classList.add(e)}function u(t,e,o){t.dropdown.addEventListener("animationend",function r(){t.dropdown.classList.remove(o),h(t,e),t.dropdown.removeEventListener("animationend",r)}),t.dropdown.classList.add(o)}function f(t,e){if(e)for(var o,r=t.descendantsNode.length;r--,o=t.descendantsNode[r];)o.status||(o.dropdown.classList.add("droppy__drop--active"),o.trigger.setAttribute("aria-expanded","true"),o.status=!0);t.dropdown.classList.add("droppy__drop--active"),t.trigger.setAttribute("aria-expanded","true"),t.status=!0}function h(t,e){if(t.dropdown.classList.remove("droppy__drop--active"),t.trigger.setAttribute("aria-expanded","false"),t.status=!1,e)for(var o,r=t.descendantsNode.length;r--,o=t.descendantsNode[r];)o.status&&(o.dropdown.classList.remove("droppy__drop--active"),o.trigger.setAttribute("aria-expanded","false"),o.status=!1)}function v(e){for(var o,i=r(e.target,document.body,".droppy__trigger",!0),a=n(e.target,document.body,".droppy",!1),l=[],c=m.length;c--,o=m[c];)o.options.clickOutToClose&&l.push(o);if(l=l.filter(function(e){for(var o,r=this.length;r--,o=this[r];)if(t.prototype.getInstance(o)===e)return!1;return!0},a),i){o=t.prototype.getInstance(r(e.target,document.body,".droppy",!1));var p=!!e.shiftKey||void 0,d=s("trigger",i,o.tree);o.toggle(d,p),o.options.preventDefault&&e.preventDefault()}for(var u,f=l.length;f--,u=l[f];)u.closeAll()}function g(t){if(27===t.which)for(var e,o=m.length;o--,e=m[o];)e.options.clickEscToClose&&e.closeAll()}var y=window.console,m=[],b=l();t.prototype.init=function(){if(!t.prototype.isInitialized(this)){"function"==typeof this.callbacks.beforeInit&&this.callbacks.beforeInit(),this.tree=i(this.element,this.options.dropdownSelector,this.options.parentSelector,this.options.triggerSelector),this.element.classList.add("droppy");for(var e,o=this.tree.length;o--,e=this.tree[o];)e.dropdown.classList.add("droppy__drop"),e.parent.classList.add("droppy__parent"),e.trigger.classList.add("droppy__trigger"),e.trigger.setAttribute("aria-haspopup","true"),e.trigger.setAttribute("aria-expanded","false");0===m.length&&(document.body.addEventListener("click",v),document.body.addEventListener("keyup",g)),m.push(this),"function"==typeof this.callbacks.afterInit&&this.callbacks.afterInit()}},t.prototype.destroy=function(){if(t.prototype.isInitialized(this)){"function"==typeof this.callbacks.beforeDestroy&&this.callbacks.beforeDestroy(),this.element.classList.remove("droppy");for(var e,o=this.tree.length;o--,e=this.tree[o];)e.dropdown.classList.remove("droppy__drop","droppy__drop--active"),e.parent.classList.remove("droppy__parent"),e.trigger.classList.remove("droppy__trigger"),e.trigger.removeAttribute("aria-haspopup"),e.trigger.removeAttribute("aria-expanded");delete this.tree,1===m.length&&(document.body.removeEventListener("click",v),document.body.removeEventListener("keyup",g)),delete this.handler;for(var r,n=m.length;n--,r=m[n];)r===this&&m.splice(n,1);"function"==typeof this.callbacks.afterDestroy&&this.callbacks.afterDestroy()}},t.prototype.open=function(t,o){var r;if(r=t instanceof e?t:s("dropdown",t,this.tree),!r.status){if("function"==typeof this.callbacks.beforeOpen&&this.callbacks.beforeOpen(),this.options.closeOthers)for(var n,i=a("level",r.level,this.tree),l=i.length;l--,n=i[l];)n.status&&p(n,!0,this.options.animationOut);c(r,o,this.options.animationIn),"function"==typeof this.callbacks.afterOpen&&this.callbacks.afterOpen()}},t.prototype.close=function(t,o){var r;r=t instanceof e?t:s("dropdown",t,this.tree),r.status&&("function"==typeof this.callbacks.beforeClose&&this.callbacks.beforeClose(),p(r,o,this.options.animationOut),"function"==typeof this.callbacks.afterClose&&this.callbacks.afterClose())},t.prototype.toggle=function(t,o){var r;r=t instanceof e?t:s("dropdown",t,this.tree),r.status?this.close(r,o):this.open(r,o)},t.prototype.closeAll=function(){var t=s("status",!0,this.tree);if(t){"function"==typeof this.callbacks.beforeCloseAll&&this.callbacks.beforeCloseAll();for(var e,o=a("level",0,this.tree),r=o.length;r--,e=o[r];)e.status&&p(e,!0,this.options.animationOut);"function"==typeof this.callbacks.afterCloseAll&&this.callbacks.afterCloseAll()}},t.prototype.openAll=function(){var t=s("status",!1,this.tree);if(t){"function"==typeof this.callbacks.beforeOpenAll&&this.callbacks.beforeOpenAll();for(var e,o=a("level",0,this.tree),r=o.length;r--,e=o[r];)if(e.status){var n,i=0;for(e.descendantsNode.length;n=e.descendantsNode[i];++i)n.status||c(n,!0,this.options.animationIn)}else c(e,!0,this.options.animationIn);"function"==typeof this.callbacks.afterOpenAll&&this.callbacks.afterOpenAll()}},t.prototype.isInitialized=function(t){for(var e,o=m.length;o--,e=m[o];)if(t===e)return!0;return!1},t.prototype.getInstance=function(t){for(var e,o=m.length;o--,e=m[o];)if(e.element===t)return e};for(var w=document.querySelectorAll("[data-droppy]"),_=0;_<w.length;++_)new t(w[_],JSON.parse(w[_].getAttribute("data-droppy")));return t});