/*! v2.2.0 */
"use strict";export class DroppyContext{instances=[];constructor(){document.addEventListener("click",this.handleClose)}push(...t){this.instances.push(...t)}handleClose=t=>{for(const e of this.instances)e.drop.checkVisibility()&&e.options.clickAwayToClose&&!e.trigger.contains(t.target)&&!e.drop.contains(t.target)&&e.hide()};hideAll(){for(const t of this.instances)t.drop.checkVisibility()&&t.hide()}showAll(){for(const t of this.instances)t.drop.checkVisibility()||t.show()}}export const globalContext=new DroppyContext;const droppyOptions={animationIn:"",animationOut:"",display:"block",clickAwayToClose:!0,preventDefault:!1};export default class Droppy{trigger;drop;options;context;constructor(t,e,o={},n=globalContext){this.trigger=t,this.trigger.addEventListener("click",(()=>this.toggle())),this.drop=e,this.options={...droppyOptions,...o},this.context=n,this.context.push(this)}show(){this.options.preventDefault&&event.preventDefault(),this.options.animationIn&&(this.drop.addEventListener("animationend",(()=>{this.drop.classList.remove(this.options.animationIn)}),{once:!0}),this.drop.classList.add(this.options.animationIn)),this.drop.style.display=this.options.display}hide(){this.options.preventDefault&&event.preventDefault(),this.drop.addEventListener("animationend",(()=>{this.drop.style.display="none",this.options.animationOut&&this.drop.classList.remove(this.options.animationOut)}),{once:!0}),this.options.animationOut?this.drop.classList.add(this.options.animationOut):this.drop.dispatchEvent(new Event("animationend"))}toggle(){const t=new CustomEvent("beforetoggle",{bubbles:!0,cancelable:!0,detail:{droppy:this}});if(this.drop.dispatchEvent(t),t.defaultPrevented)return;this.drop.checkVisibility()?this.hide():this.show();const e=new CustomEvent("toggle",{bubbles:!0,cancelable:!0,detail:{droppy:this}});this.drop.dispatchEvent(e)}}const generatorOptions={wrapper:"li",trigger:"a",drop:"ul",newContext:!1,...droppyOptions};export function menuGenerator(t,e){const o=(e={...generatorOptions,...e}).newContext?new DroppyContext:globalContext,n=t.querySelectorAll(e.wrapper);for(const t of n){const n=t.querySelector(e.trigger),i=t.querySelector(e.drop);n&&i&&new Droppy(n,i,e,o)}return o}document.querySelectorAll("[data-menu]").forEach((t=>menuGenerator(t,JSON.parse(t.dataset.menu||"{}"))));export function tabsGenerator(t,e){e={...generatorOptions,...e};const o=new DroppyContext;t.addEventListener("beforetoggle",(t=>{const e=t.detail.droppy;e.drop.checkVisibility()?t.preventDefault():e.context.hideAll()}));const n=t.querySelectorAll("[data-tab]");for(const i of n){const n=t.querySelector(i.dataset.tab);new Droppy(i,n,e,o)}return o}document.querySelectorAll("[data-tabs]").forEach((t=>tabsGenerator(t,JSON.parse(t.dataset.tabs||"{}"))));