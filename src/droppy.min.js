/*! v2.1.0 */
"use strict";export class DroppyContext{context=[];constructor(){document.addEventListener("click",this.handleClose)}push(...t){this.context.push(...t)}handleClose=t=>{for(const o of this.context)o.drop.checkVisibility()&&o.options.clickAwayToClose&&!o.trigger.contains(t.target)&&!o.drop.contains(t.target)&&o.hide()};closeAll(){console.log(this.context);for(const t of this.context)t.drop.checkVisibility()&&t.hide()}}export const globalContext=new DroppyContext;const droppyOptions={animationIn:"",animationOut:"",display:"block",clickAwayToClose:!0,closeOthers:!1,preventDefault:!1};export default class Droppy{trigger;drop;options;#t=globalContext;constructor(t,o,i={},e){this.trigger=t,this.trigger.addEventListener("click",(()=>this.toggle())),this.drop=o,this.options={...droppyOptions,...i},e&&(this.#t=e),this.#t.push(this)}show(){this.options.preventDefault&&event.preventDefault(),this.options.animationIn&&(this.drop.addEventListener("animationend",(()=>{this.drop.classList.remove(this.options.animationIn)}),{once:!0}),this.drop.classList.add(this.options.animationIn)),this.drop.style.display=this.options.display}hide(){this.options.preventDefault&&event.preventDefault(),this.drop.addEventListener("animationend",(()=>{this.drop.style.display="none",this.options.animationOut&&this.drop.classList.remove(this.options.animationOut)}),{once:!0}),this.options.animationOut?this.drop.classList.add(this.options.animationOut):this.drop.dispatchEvent(new Event("animationend"))}toggle(){this.drop.checkVisibility()?this.hide():this.show()}}const generatorOptions={wrapper:"li",trigger:"a",drop:"ul",...droppyOptions};export function generator(t,o){const i=[];o={...generatorOptions,...o};return t.querySelectorAll(o.wrapper).forEach((t=>{const e=t.querySelector(o.trigger),s=t.querySelector(o.drop);e&&s&&i.push(new Droppy(e,s,o))})),i}document.querySelectorAll("[data-droppy]").forEach((t=>{generator(t,JSON.parse(t.dataset.droppy||"{}"))}));